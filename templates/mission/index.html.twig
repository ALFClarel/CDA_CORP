{% extends 'base.html.twig' %}

{% block title %}Mission index{% endblock %}

{% block body %}

<!-- DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">

<!-- jQuery (requis pour DataTables) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- DataTables JS -->
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>

<h1>Mission index</h1>

<!-- Table avec un identifiant unique -->
<table class="table" id="myTable">
    <thead>
        <tr>
            <th>Id</th>
            <th>Title</th>
            <th>Description</th>
            <th>Status</th>
            <th>StartAt</th>
            <th>EndAt</th>
            <th>Location</th>
            <th>DangerLevel</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    {% for mission in missions %}
        <tr>
            <td>{{ mission.id }}</td>
            <td>{{ mission.title }}</td>
            <td>{{ mission.description }}</td>
            <td>{{ mission.status }}</td>
            <td>{{ mission.startAt ? mission.startAt|date('Y-m-d H:i:s') : '' }}</td>
            <td>{{ mission.endAt ? mission.endAt|date('Y-m-d H:i:s') : '' }}</td>
            <td>{{ mission.location }}</td>
            <td>{{ mission.dangerLevel }}</td>
            <td>
                <a href="{{ path('app_mission_show', {'id': mission.id}) }}">show</a>
                <a href="{{ path('app_mission_edit', {'id': mission.id}) }}">edit</a>
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="9">no records found</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<a href="{{ path('app_mission_new') }}">Create new</a>

<!-- Initialiser DataTable -->
<script>
    $(document).ready(function() {
        $('#myTable').DataTable({
            paging: true,        // Active la pagination
            searching: true,     // Active la recherche
            ordering: true,      // Active le tri des colonnes
            info: true,          // Affiche le nombre d'éléments
            responsive: true     // Permet une meilleure réactivité sur mobile
        });
    });
</script>

{% endblock %}
